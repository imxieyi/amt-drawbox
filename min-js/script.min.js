!function(){"use strict";function e(e,i,n){return i=i?i:"color",n=n?n:"rgb(255, 255, 255)",$(e).css(i)===n}function i(e){countBoxes.innerHTML=+countBoxes.innerHTML+e,+countBoxes.innerHTML<0&&(countBoxes.innerHTML=0)}function n(){$(magnifyIcon).removeClass("magnifyIcon"),$(".magnify").remove(),$(image).prepend('<img class="zoom" src="'+f.imgVal+'" data-magnify-src="'+f.imgVal+'">')}function o(){var e=Math.ceil(Math.random()*f.numImg);f.imgVal="pictures/img"+e+".jpg",$(".zoom")[0].src=f.imgVal,$(".zoom").attr("data-magnify-src",f.imgVal)}function t(){return image.children.length>1}function a(){t()&&$(".box").remove(),i(-countBoxes.innerHTML)}function s(){"2px"===$(".box").css("border-width")&&$(".box").css("border-width","2.25px")}function r(){function e(e){$(e).animate({backgroundColor:"#16a085",color:"white"},150,"easeOutQuad")}function i(i){var n=i.parentElement.children;for(g=0,d=n.length;g<d;g++)$(n[g]).css("background-color","#e8e8e8"),$(n[g]).css("color","black");e(i)}function o(e,i,n){var o=document.getElementsByClassName("box");for(g=0;g<o.length;g++)n&&o[g].innerHTML!=="<p>"+n+"</p>"||$(o[g]).css(e,i)}function t(){o("color",this.value,this.previousSibling.innerHTML),o("border-color",this.value,this.previousSibling.innerHTML)}person.onclick=function(){i(this)},automobile.onclick=function(){i(this)},color1.oninput=t,color2.oninput=t,onePX.onclick=function(){i(this),o("border-width",this.innerHTML)},twoPX.onclick=function(){i(this),o("border-width",this.innerHTML),s()},drag.onclick=function(){i(this),image.removeEventListener("click",c),image.addEventListener("mousedown",c),image.addEventListener("mouseup",c)},clickAndDrag.onclick=function(){i(this),image.removeEventListener("mousedown",c),image.removeEventListener("mouseup",c),image.addEventListener("click",c)},magnifyIcon.onclick=function(){$(magnifyIcon).hasClass("magnifyIcon")===!0?n():($(magnifyIcon).addClass("magnifyIcon"),$(".zoom").attr("height",$(".zoom").height()+"px"),$(".zoom").magnify())}}function c(n){function o(i,n,o){for(g=0,d=i.children.length;g<d;g++)e(i.children[g])&&(o?(f.divBox.style[n]=i.children[g].innerHTML,s()):g!==d-1&&(f.divBox.style[n]=i.children[g].nextSibling.value))}if(null===f.divBox)"P"!==n.target.tagName&&"DIV"!==n.target.tagName?(f.mouse.startX=f.mouse.x,f.mouse.startY=f.mouse.y,f.divBox=document.createElement("div"),f.divBox.className="box",o(color,"color",!1),o(color,"borderColor",!1),o(borderWidth,"borderWidth",!0),f.divBox.style.left=f.mouse.x+"px",f.divBox.style.top=f.mouse.y+"px",image.appendChild(f.divBox),image.style.cursor="crosshair",e(drag)?image.addEventListener("mouseup",c):image.removeEventListener("mouseup",c)):image.removeEventListener("mouseup",c);else{if(Math.abs(f.mouse.xDiff())<10||Math.abs(f.mouse.yDiff())<10)$(f.divBox).remove();else{$(".box").draggable({containment:"parent"}),$(".box").resizable({containment:"parent"});var t;t=e(person)?"Person":"Automobile",$(f.divBox).prepend("<p>"+t+"</p>"),i(1)}f.divBox=null,image.style.cursor=""}}function m(){function e(e){var i=image.getBoundingClientRect().left,n=image.getBoundingClientRect().top;f.mouse.x=e.pageX+window.pageXOffset-i-2*$(window).scrollLeft(),f.mouse.y=e.pageY+window.pageYOffset-n-2*$(window).scrollTop()}image.ondragstart=function(e){var i=$(".box");for(g=0;g<i.length;g++)if(i[g]===e.target)return!0;return!1},image.onmousemove=function(i){function n(e){e=100*e+"%"}e(i),null!==f.divBox&&(f.divBox.style.width=Math.abs(f.mouse.xDiff())/image.offsetWidth*100+"%",f.divBox.style.height=Math.abs(f.mouse.yDiff())/image.offsetHeight*100+"%",f.mouse.xDiff()>0?f.divBox.style.left=f.mouse.startX:f.divBox.style.left=f.mouse.x,f.divBox.style.left/=image.offsetWidth,n(f.divBox.style.left),f.mouse.yDiff()>0?f.divBox.style.top=f.mouse.startY:f.divBox.style.top=f.mouse.y,f.divBox.style.top/=image.offsetHeight,n(f.divBox.style.top))},image.addEventListener("mousedown",c),image.addEventListener("mouseup",c),image.addEventListener("mouseleave",function(){image.removeEventListener("mouseup",c),f.divBox||(f.divBox=null,image.style.cursor="")})}function l(){submit.onclick=function(){function e(e,n){return Math.round(e*i[n]/image.children[0][n])}if(t()){$(magnifyIcon).hasClass("magnifyIcon")&&n();var i=new Image;for(i.src=f.imgVal,console.log("Image Dimensions\nNative Width: "+i.width+"px\nNative Height: "+i.height+"px"),g=1,d=image.children.length;g<d;g++){var a=image.children[0].getBoundingClientRect(),s=image.children[g].getBoundingClientRect(),r=Math.abs(s.left-a.left),c=Math.abs(s.top-a.top);console.log("Box "+g+" Dimensions\nType: "+image.children[g].children[0].innerHTML+"\nWidth: "+e(image.children[g].offsetWidth,"width")+"\nHeight: "+e(image.children[g].offsetHeight,"height")+"\nRelative Position: ("+e(r,"width")+"px, "+e(c,"height")+"px)")}o(),cancel.click()}},undo.onclick=function(){t()&&image.removeChild(image.children[image.children.length-1]),i(-1)},cancel.onclick=a}function u(){function e(){$(magnifyIcon).hasClass("magnifyIcon")&&t()&&magnifyIcon.click(),f.bool?image.style.margin="0 auto":image.style.margin="auto",f.bool=!f.bool}window.onload=function(){f.imagePos=image.getBoundingClientRect()},window.addEventListener("resize",e)}var g,d,f={mouse:{x:0,y:0,startX:0,startY:0,xDiff:function(){return f.mouse.x-f.mouse.startX},yDiff:function(){return f.mouse.y-f.mouse.startY}},divBox:null,numImg:24,imgVal:"","boolean":!0};o(),r(),m(),l(),u()}();