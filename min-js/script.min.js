!function(){"use strict";function e(e,n,o){return n=n?n:"color",o=o?o:"rgb(255, 255, 255)",$(e).css(n)===o}function n(e){countBoxes.innerHTML=+countBoxes.innerHTML+e,+countBoxes.innerHTML<0&&(countBoxes.innerHTML=0)}function o(){$(magnifyIcon).removeClass("magnifyIcon"),$(".magnify").remove(),$(image).prepend('<img class="zoom" src="'+u.imgVal+'" data-magnify-src="'+u.imgVal+'">')}function i(){var e=Math.ceil(Math.random()*u.numImg);u.imgVal="pictures/img"+e+".jpg",$(".zoom")[0].src=u.imgVal,$(".zoom").attr("data-magnify-src",u.imgVal)}function t(){function e(e){$(e).animate({backgroundColor:"#16a085",color:"white"},150,"easeOutQuad")}function n(n){var o=n.parentElement.children;for(m=0,l=o.length;m<l;m++)$(o[m]).css("background-color","#e8e8e8"),$(o[m]).css("color","black");e(n)}function i(e,n,o){var i=document.getElementsByClassName("box");for(m=0;m<i.length;m++)o&&i[m].innerHTML!=="<p>"+o+"</p>"||$(i[m]).css(e,n)}function t(){i("color",this.value,this.previousSibling.innerHTML),i("border-color",this.value,this.previousSibling.innerHTML)}person.onclick=function(){n(this)},automobile.onclick=function(){n(this)},color1.oninput=t,color2.oninput=t,onePX.onclick=function(){n(this),i("border-width",this.innerHTML)},twoPX.onclick=function(){n(this),i("border-width",this.innerHTML)},drag.onclick=function(){n(this),image.removeEventListener("click",s),image.addEventListener("mousedown",s),image.addEventListener("mouseup",s)},clickAndDrag.onclick=function(){n(this),image.removeEventListener("mousedown",s),image.removeEventListener("mouseup",s),image.addEventListener("click",s)},magnifyIcon.onclick=function(){$(magnifyIcon).hasClass("magnifyIcon")===!0?o():($(magnifyIcon).addClass("magnifyIcon"),$(".zoom").attr("height",$(".zoom").height()+"px"),$(".zoom").magnify())}}function s(){function o(n,o,i){for(m=0,l=n.children.length;m<l;m++)e(n.children[m])&&(i?u.divBox.style[o]=n.children[m].innerHTML:m!==l-1&&(u.divBox.style[o]=n.children[m].nextSibling.value))}if(null===u.divBox)"P"!==event.target.tagName&&"DIV"!==event.target.tagName?(u.mouse.startX=u.mouse.x,u.mouse.startY=u.mouse.y,u.divBox=document.createElement("div"),u.divBox.className="box",o(color,"color",!1),o(color,"borderColor",!1),o(borderWidth,"borderWidth",!0),u.divBox.style.left=u.mouse.x+"px",u.divBox.style.top=u.mouse.y+"px",image.appendChild(u.divBox),image.style.cursor="crosshair",e(drag)?image.addEventListener("mouseup",s):image.removeEventListener("mouseup",s)):image.removeEventListener("mouseup",s);else{if(Math.abs(u.mouse.x-u.mouse.startX)<5||Math.abs(u.mouse.y-u.mouse.startY)<5)$(u.divBox).remove();else{var i;i=e(person)?"Person":"Automobile",$(u.divBox).prepend("<p>"+i+"</p>"),n(1)}u.divBox=null,image.style.cursor=""}}function a(){function e(e){var n=e||window.event;n.pageX?(u.mouse.x=n.pageX+window.pageXOffset,u.mouse.y=n.pageY+window.pageYOffset):n.clientX&&(u.mouse.x=n.clientX+document.body.scrollLeft,u.mouse.y=n.clientY+document.body.scrollTop)}image.onmousemove=function(){e(event),null!==u.divBox&&(u.divBox.style.width=Math.abs(u.mouse.x-u.mouse.startX)+"px",u.divBox.style.height=Math.abs(u.mouse.y-u.mouse.startY)+"px",u.divBox.style.left=u.mouse.x-u.mouse.startX<0?u.mouse.x+"px":u.mouse.startX+"px",u.divBox.style.top=u.mouse.y-u.mouse.startY<0?u.mouse.y+"px":u.mouse.startY+"px")},image.addEventListener("mousedown",s),image.addEventListener("mouseup",s),image.addEventListener("mouseleave",function(){image.removeEventListener("mouseup",s),u.divBox||(u.divBox=null,image.style.cursor="")})}function r(){submit.onclick=function(){function e(e,o){return(e+"").match(/px/)&&(e=+e.slice(0,e.length-2)),Math.round(e*n[o]/image.children[0][o])}if(image.children.length>1){$(magnifyIcon).hasClass("magnifyIcon")===!0&&o();var n=new Image;for(n.src=u.imgVal,console.log("Image Dimensions\nNative Width: "+n.width+"px\nNative Height: "+n.height+"px"),m=1,l=image.children.length;m<l;m++){var t=image.children[0].getBoundingClientRect(),s=image.children[m].getBoundingClientRect(),a=Math.abs(s.left-t.left),r=Math.abs(s.top-t.top);console.log("Box "+m+" Dimensions\nWidth: "+e(image.children[m].style.width,"width")+"\nHeight: "+e(image.children[m].style.height,"height")+"\nRelative Position: ("+e(a,"width")+"px, "+e(r,"height")+"px)")}i(),cancel.click()}},undo.onclick=function(){image.children.length>1&&image.removeChild(image.children[image.children.length-1]),n(-1)},cancel.onclick=function(){image.children.length>1&&$(".box").remove(),n(-countBoxes.innerHTML)}}function c(){window.onresize=function(){$(".box").remove()}}var m,l,u={mouse:{x:0,y:0,startX:0,startY:0},divBox:null,numImg:24,imgVal:""};i(),t(),a(),r(),c()}();