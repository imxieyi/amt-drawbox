!function(){"use strict";function e(e,n,o){return n=n?n:"color",o=o?o:"rgb(255, 255, 255)",$(e).css(n)===o}function n(e){countBoxes.innerHTML=+countBoxes.innerHTML+e,+countBoxes.innerHTML<0&&(countBoxes.innerHTML=0)}function o(){$(magnifyIcon).removeClass("magnifyIcon"),$(".magnify").remove(),$(image).prepend('<img class="zoom" src="'+d.imgVal+'" data-magnify-src="'+d.imgVal+'">')}function i(){var e=Math.ceil(Math.random()*d.numImg);d.imgVal="pictures/img"+e+".jpg",$(".zoom")[0].src=d.imgVal,$(".zoom").attr("data-magnify-src",d.imgVal)}function t(){return image.children.length>1}function a(){t()&&$(".box").remove(),n(-countBoxes.innerHTML)}function s(){function e(e){$(e).animate({backgroundColor:"#16a085",color:"white"},150,"easeOutQuad")}function n(n){var o=n.parentElement.children;for(u=0,g=o.length;u<g;u++)$(o[u]).css("background-color","#e8e8e8"),$(o[u]).css("color","black");e(n)}function i(e,n,o){var i=document.getElementsByClassName("box");for(u=0;u<i.length;u++)o&&i[u].innerHTML!=="<p>"+o+"</p>"||$(i[u]).css(e,n)}function t(){i("color",this.value,this.previousSibling.innerHTML),i("border-color",this.value,this.previousSibling.innerHTML)}person.onclick=function(){n(this)},automobile.onclick=function(){n(this)},color1.oninput=t,color2.oninput=t,onePX.onclick=function(){n(this),i("border-width",this.innerHTML)},twoPX.onclick=function(){n(this),i("border-width",this.innerHTML)},drag.onclick=function(){n(this),image.removeEventListener("click",r),image.addEventListener("mousedown",r),image.addEventListener("mouseup",r)},clickAndDrag.onclick=function(){n(this),image.removeEventListener("mousedown",r),image.removeEventListener("mouseup",r),image.addEventListener("click",r)},magnifyIcon.onclick=function(){$(magnifyIcon).hasClass("magnifyIcon")===!0?o():($(magnifyIcon).addClass("magnifyIcon"),$(".zoom").attr("height",$(".zoom").height()+"px"),$(".zoom").magnify())}}function r(){function o(n,o,i){for(u=0,g=n.children.length;u<g;u++)e(n.children[u])&&(i?d.divBox.style[o]=n.children[u].innerHTML:u!==g-1&&(d.divBox.style[o]=n.children[u].nextSibling.value))}if(null===d.divBox)"P"!==event.target.tagName&&"DIV"!==event.target.tagName?(d.mouse.startX=d.mouse.x,d.mouse.startY=d.mouse.y,d.divBox=document.createElement("div"),d.divBox.className="box",o(color,"color",!1),o(color,"borderColor",!1),o(borderWidth,"borderWidth",!0),d.divBox.style.left=d.mouse.x+"px",d.divBox.style.top=d.mouse.y+"px",image.appendChild(d.divBox),image.style.cursor="crosshair",e(drag)?image.addEventListener("mouseup",r):image.removeEventListener("mouseup",r)):image.removeEventListener("mouseup",r);else{if(Math.abs(d.mouse.x-d.mouse.startX)<10||Math.abs(d.mouse.y-d.mouse.startY)<10)$(d.divBox).remove();else{$(".box").draggable({containment:"parent"}),$(".box").resizable({containment:"parent"});var i;i=e(person)?"Person":"Automobile",$(d.divBox).prepend("<p>"+i+"</p>"),n(1)}d.divBox=null,image.style.cursor=""}}function m(){function e(e){var n=e||window.event,o=image.getBoundingClientRect().left,i=image.getBoundingClientRect().top;n.pageX?(d.mouse.x=n.pageX+window.pageXOffset-o,d.mouse.y=n.pageY+window.pageYOffset-i):n.clientX&&(d.mouse.x=n.clientX+document.body.scrollLeft-imgleft,d.mouse.y=n.clientY+document.body.scrollTop-i)}image.onmousemove=function(){e(event),null!==d.divBox&&(d.divBox.style.width=Math.abs(d.mouse.x-d.mouse.startX)/image.offsetWidth*100+"%",d.divBox.style.height=Math.abs(d.mouse.y-d.mouse.startY)/image.offsetHeight*100+"%",d.divBox.style.left=d.mouse.x-d.mouse.startX<0?d.mouse.x/image.offsetWidth*100+"%":d.mouse.startX/image.offsetWidth*100+"%",d.divBox.style.top=d.mouse.y-d.mouse.startY<0?d.mouse.y/image.offsetHeight*100+"%":d.mouse.startY/image.offsetHeight*100+"%")},image.addEventListener("mousedown",r),image.addEventListener("mouseup",r),image.addEventListener("mouseleave",function(){image.removeEventListener("mouseup",r),d.divBox||(d.divBox=null,image.style.cursor="")})}function c(){submit.onclick=function(){function e(e,o){return Math.round(e*n[o]/image.children[0][o])}if(t()){$(magnifyIcon).hasClass("magnifyIcon")===!0&&o();var n=new Image;for(n.src=d.imgVal,console.log("Image Dimensions\nNative Width: "+n.width+"px\nNative Height: "+n.height+"px"),u=1,g=image.children.length;u<g;u++){var a=image.children[0].getBoundingClientRect(),s=image.children[u].getBoundingClientRect(),r=Math.abs(s.left-a.left),m=Math.abs(s.top-a.top);console.log("Box "+u+" Dimensions\nWidth: "+e(image.children[u].offsetWidth,"width")+"\nHeight: "+e(image.children[u].offsetHeight,"height")+"\nRelative Position: ("+e(r,"width")+"px, "+e(m,"height")+"px)")}i(),cancel.click()}},undo.onclick=function(){t()&&image.removeChild(image.children[image.children.length-1]),n(-1)},cancel.onclick=a}function l(){function e(){d.bool?image.style.margin="0 auto":image.style.margin="auto",d.bool=!d.bool}window.onload=function(){d.imagePos=image.getBoundingClientRect()},window.addEventListener("resize",e)}var u,g,d={mouse:{x:0,y:0,startX:0,startY:0},divBox:null,numImg:24,imgVal:"","boolean":!0};i(),s(),m(),c(),l()}();